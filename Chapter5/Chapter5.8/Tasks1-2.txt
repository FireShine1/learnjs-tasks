Для первой задачи подойдет структура WeakSet, для второй - WeakMap.